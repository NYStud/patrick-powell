{\"$schema\":\"https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#\",\"contentVersion\":\"1.0.0.0\",\"parameters\":{\"logicAppName\":{\"type\":\"String\",\"metadata\":{\"description\":\"Name of the logic app.\"}},\"logicAppLocation\":{\"defaultValue\":\"[resourceGroup().location]\",\"allowedValues\":[\"eastasia\",\"southeastasia\",\"centralism\",\"eastus\",\"eastus2\",\"westus\",\"northcentralus\",\"southcentralus\",\"northeurope\",\"westeurope\",\"japanwest\",\"japaneast\",\"brazilsouth\",\"australiaeast\",\"australiasoutheast\",\"southindia\",\"centralindia\",\"westindia\",\"canadacentral\",\"canadaeast\",\"westcentralus\",\"westus2\",\"[resourceGroup().location]\"],\"type\":\"String\",\"metadata\":{\"description\":\"Location of the logic app.\"}},\"onedrive_Connection_Name\":{\"defaultValue\":\"onedrive\",\"type\":\"String\",\"metadata\":{\"description\":\"Name of the connection.\"}},\"googlesheet_Connection_Name\":{\"defaultValue\":\"googlesheet\",\"type\":\"String\",\"metadata\":{\"description\":\"Name of the connection.\"}}},\"resources\":[{\"type\":\"Microsoft.Logic/workflows\",\"name\":\"[parameters('logicAppName')]\",\"apiVersion\":\"2016-06-01\",\"location\":\"[parameters('logicAppLocation')]\",\"properties\":{\"state\":\"Disabled\",\"definition\":{\"$schema\":\"https://schema.management.azure.com/providers/Microsoft.Logic/schemas/2016-06-01/workflowdefinition.json#\",\"contentVersion\":\"1.0.0.0\",\"parameters\":{\"$connections\":{\"defaultValue\":{},\"type\":\"Object\"},\"$authentication\":{\"defaultValue\":{},\"type\":\"SecureObject\"}},\"triggers\":{\"When_a_file_is_modified\":{\"recurrence\":{\"interval\":15,\"frequency\":\"Minute\"},\"metadata\":{\"6e202211-2856-4d17-9ded-5beb8b8626b0\":\"/\",\"flowSystemMetadata\":{\"swaggerOperationId\":\"OnUpdatedFileV2\"}},\"type\":\"ApiConnection\",\"inputs\":{\"host\":{\"connection\":{\"name\":\"@parameters('$connections')['onedrive']['connectionId']\"}},\"method\":\"get\",\"path\":\"/datasets/default/triggers/onupdatedfilev2\",\"queries\":{\"folderId\":\"6e202211-2856-4d17-9ded-5beb8b8626b0\",\"includeFileContent\":true,\"simulate\":false,\"includeSubfolders\":true,\"inferContentType\":true},\"authentication\":\"@parameters('$authentication')\"}}},\"actions\":{\"Insert_row\":{\"runAfter\":{},\"metadata\":{\"1l1MrKl4Sgi5gJuqkozChgyO2S-_UZN46xFYK6QlVbxo\":\"/server\",\"flowSystemMetadata\":{\"swaggerOperationId\":\"PostItem\"}},\"type\":\"ApiConnection\",\"inputs\":{\"host\":{\"connection\":{\"name\":\"@parameters('$connections')['googlesheet']['connectionId']\"}},\"method\":\"post\",\"body\":{\"parameter\":\"@triggerOutputs()['headers']['x-ms-file-etag']\",\"value\":\"@base64ToString(triggerOutputs()['headers']['x-ms-file-path-encoded'])\"},\"path\":\"/datasets/@{encodeURIComponent(encodeURIComponent('1l1MrKl4Sgi5gJuqkozChgyO2S-_UZN46xFYK6QlVbxo'))}/tables/@{encodeURIComponent(encodeURIComponent('0'))}/items\",\"authentication\":\"@parameters('$authentication')\"}}}},\"parameters\":{\"$connections\":{\"value\":{\"onedrive\":{\"id\":\"[concat('/subscriptions/', subscription().subscriptionId, '/providers/Microsoft.Web/locations/', parameters('logicAppLocation'), '/managedApis/', 'onedrive')]\",\"connectionId\":\"[resourceId('Microsoft.Web/connections', parameters('onedrive_Connection_Name'))]\",\"connectionName\":\"[parameters('onedrive_Connection_Name')]\"},\"googlesheet\":{\"id\":\"[concat('/subscriptions/', subscription().subscriptionId, '/providers/Microsoft.Web/locations/', parameters('logicAppLocation'), '/managedApis/', 'googlesheet')]\",\"connectionId\":\"[resourceId('Microsoft.Web/connections', parameters('googlesheet_Connection_Name'))]\",\"connectionName\":\"[parameters('googlesheet_Connection_Name')]\"}}}},\"runtimeConfiguration\":{\"lifetime\":{\"unit\":\"Day\",\"count\":30},\"collections\":{\"maximumItemCount\":5000},\"performanceProfile\":{\"throttles\":{\"mode\":\"Low\"}}}},\"dependsOn\":[\"[resourceId('Microsoft.Web/connections', parameters('onedrive_Connection_Name'))]\",\"[resourceId('Microsoft.Web/connections', parameters('googlesheet_Connection_Name'))]\"]},{\"type\":\"Microsoft.Web/connections\",\"name\":\"[parameters('onedrive_Connection_Name')]\",\"apiVersion\":\"2016-06-01\",\"location\":\"[parameters('logicAppLocation')]\",\"properties\":{\"api\":{\"id\":\"[concat('/subscriptions/', subscription().subscriptionId, '/providers/Microsoft.Web/locations/', parameters('logicAppLocation'), '/managedApis/', 'onedrive')]\"},\"displayName\":\"[parameters('onedrive_Connection_Name')]\"}},{\"type\":\"Microsoft.Web/connections\",\"name\":\"[parameters('googlesheet_Connection_Name')]\",\"apiVersion\":\"2016-06-01\",\"location\":\"[parameters('logicAppLocation')]\",\"properties\":{\"api\":{\"id\":\"[concat('/subscriptions/', subscription().subscriptionId, '/providers/Microsoft.Web/locations/', parameters('logicAppLocation'), '/managedApis/', 'googlesheet')]\"},\"displayName\":\"[parameters('googlesheet_Connection_Name')]\"}}]}
